<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SC Demo</title>
  <style>
    .division {
      background-color: darkgoldenrod;
      text-align: center !important;
    }

    table {
      text-align: center;
      background-color: cornflowerblue;
      width: 100%;
      border-radius: 20px;
      border-style: solid;
      border-width: 1px;
      border-color: transparent;
      padding: 10px;
    }

    /*td:first-child {
      text-align:left;
    }*/
    .spacer {
      height: 30px;
    }

    .socialMedia {
      position: relative;
      left: 50%;
      transform: translateX(-50%);
    }

    h1 {
      text-transform: uppercase;
    }

    tr {
      height: 24px;
    }

    .progressionBar {
      background-color: grey;
    }

    .progressionBar div {
      background-color: lightgray;
      width: 0%;
      height: 24px;
      margin: 0px;
    }
  </style>
</head>

<body>
  <!--leaderboard-->
  <a href="https://docs.google.com/spreadsheets/d/10chv5tyknCVULL5YRUWChXhGUH3rJ6s34QbD7vT3uBY/edit#gid=0"
    target="_blank">Google Sheet</a>
  <h1>Division I</h1>
  <table>
    <thead>
      <tr>
        <th style="width:20%">Team</th>
        <th style="width:70%">Progress</th>
        <th style="width:10%">Score</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td id="firstD1Team"></td>
        <td>
          <div class="progressionBar">
            <div id="firstD1Bar"></div>
          </div>
        </td>
        <td id="firstD1Points"></td>
      </tr>
      <tr>
        <td id="secondD1Team"></td>
        <td>
          <div class="progressionBar">
            <div id="secondD1Bar"></div>
          </div>
        </td>
        <td id="secondD1Points"></td>
      </tr>
      <tr>
        <td id="thirdD1Team"></td>
        <td>
          <div class="progressionBar">
            <div id="thirdD1Bar"></div>
          </div>
        </td>
        <td id="thirdD1Points"></td>
      </tr>
      <tr>
        <td id="fourthD1Team"></td>
        <td>
          <div class="progressionBar">
            <div id="fourthD1Bar"></div>
          </div>
        </td>
        <td id="fourthD1Points"></td>
      </tr>
      <tr>
        <td id="fifthD1Team"></td>
        <td>
          <div class="progressionBar">
            <div id="fifthD1Bar"></div>
          </div>
        </td>
        <td id="fifthD1Points"></td>
      </tr>
    </tbody>
  </table>


  <div class="spacer"></div>
  <h1>Division II</h1>
  <table>
    <thead>
      <tr>
        <th style="width:20%">Team</th>
        <th style="width:70%">Progress</th>
        <th style="width:10%">Score</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td id="firstD2Team"></td>
        <td>
          <div class="progressionBar">
            <div id="firstD2Bar"></div>
          </div>
        </td>
        <td id="firstD2Points"></td>
      </tr>
      <tr>
        <td id="secondD2Team"></td>
        <td>
          <div class="progressionBar">
            <div id="secondD2Bar"></div>
          </div>
        </td>
        <td id="secondD2Points"></td>
      </tr>
      <tr>
        <td id="thirdD2Team"></td>
        <td>
          <div class="progressionBar">
            <div id="thirdD2Bar"></div>
          </div>
        </td>
        <td id="thirdD2Points"></td>
      </tr>
      <tr>
        <td id="fourthD2Team"></td>
        <td>
          <div class="progressionBar">
            <div id="fourthD2Bar"></div>
          </div>
        </td>
        <td id="fourthD2Points"></td>
      </tr>
      <tr>
        <td id="fifthD2Team"></td>
        <td>
          <div class="progressionBar">
            <div id="fifthD2Bar"></div>
          </div>
        </td>
        <td id="fifthD2Points"></td>
      </tr>
    </tbody>
  </table>


  <div class="spacer"></div>
  <button class="socialMedia">Social Media!</button>


  <script type="text/javascript">
    let xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange = function () {
      if (this.readyState == 4 && this.status == 200) {
        let data = JSON.parse(this.responseText).feed.entry;
        //use this to find the weird array names for new columns on the google sheet
        //console.log(data[0]);
        for (i = 0; i < data.length; i++) {
          let team = data[i]["gsx$team"]["$t"];
          let bar = 100 * data[i]["gsx$total"]["$t"] / 2200;
          let points = data[i]["gsx$total"]["$t"];
          let coolArray = ["firstD1Team", "secondD1Team", "thirdD1Team", "fourthD1Team", "fifthD1Team"];
          let coolArray2 = ["firstD1Bar", "secondD1Bar", "thirdD1Bar", "fourthD1Bar", "fifthD1Bar"];
          let coolArray3 = ["firstD1Points", "secondD1Points", "thirdD1Points", "fourthD1Points", "fifthD1Points"];

          /*document.getElementById('d2').innerHTML +=
            "<tr>" +
            "<td>" +
            team +
            "</td>" +
            "<td>" +
            total +
            "</td>" +
            "<td>" +
            "</tr>"*/
          document.getElementById(coolArray[i]).innerHTML = team;
          document.getElementById(coolArray2[i]).style.width = bar + "%";
          document.getElementById(coolArray3[i]).innerHTML = points;
        }
      }
    };
    //search for entry
    xmlhttp.open(
      "GET",
      "https://spreadsheets.google.com/feeds/list/10chv5tyknCVULL5YRUWChXhGUH3rJ6s34QbD7vT3uBY/1/public/full?alt=json",
      true
    );
    xmlhttp.send();
    let xmlhttp2 = new XMLHttpRequest();
    xmlhttp2.onreadystatechange = function () {
      if (this.readyState == 4 && this.status == 200) {
        let data = JSON.parse(this.responseText).feed.entry;
        //use this to find the weird array names for new columns on the google sheet
        //console.log(data[0]);

        let i;
        for (i = 0; i < data.length; i++) {
          let team = data[i]["gsx$team"]["$t"];
          let bar = 100 * data[i]["gsx$total"]["$t"] / 2200;
          let points = data[i]["gsx$total"]["$t"];
          let coolArray = ["firstD2Team", "secondD2Team", "thirdD2Team", "fourthD2Team", "fifthD2Team"];
          let coolArray2 = ["firstD2Bar", "secondD2Bar", "thirdD2Bar", "fourthD2Bar", "fifthD2Bar"];
          let coolArray3 = ["firstD2Points", "secondD2Points", "thirdD2Points", "fourthD2Points", "fifthD2Points"];

          /*document.getElementById('d2').innerHTML +=
            "<tr>" +
            "<td>" +
            team +
            "</td>" +
            "<td>" +
            total +
            "</td>" +
            "<td>" +
            "</tr>"*/
          document.getElementById(coolArray[i]).innerHTML = team;
          document.getElementById(coolArray2[i]).style.width = bar + "%";
          document.getElementById(coolArray3[i]).innerHTML = points;


        }
      }
    };
    //search for entry
    xmlhttp2.open(
      "GET",
      "https://spreadsheets.google.com/feeds/list/10chv5tyknCVULL5YRUWChXhGUH3rJ6s34QbD7vT3uBY/2/public/full?alt=json",
      true
    );
    xmlhttp2.send();
  </script>
</body>

</html>